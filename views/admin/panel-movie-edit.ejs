  <div id="myEditModal" class="modal" style="overflow-y: auto;">
    <div style="overflow-y: auto;" class="modal-content">
      <button class="close-button" onclick="closeEditModal()">X</button>
      <button class="clear-button" onclick="clearEditInp()">üóëÔ∏è</button>
      <h2>Edit Movie</h2>
      <label for="edit_name">Name:</label>
      <input type="text" id="edit_name" placeholder="Enter Name">

      <label for="edit_imageUrl">Image URL:</label>
      <input type="text" id="edit_imageUrl" placeholder="Enter Image URL">

      <label for="edit_description">Description:</label>
      <textarea id="edit_description" placeholder="Enter Description"></textarea>

      <label for="edit_category">Category:</label>
      <select id="edit_category" multiple>
<option value="Action">Action</option>
    <option value="Adventure">Adventure</option>
    <option value="Animation">Animation</option>
    <option value="Biography">Biography</option>
    <option value="Comedy">Comedy</option>
    <option value="Crime">Crime</option>
    <option value="Documentary">Documentary</option>
    <option value="Drama">Drama</option>
    <option value="Family">Family</option>
    <option value="Fantasy">Fantasy</option>
    <option value="Historical">Historical</option>
    <option value="Horror">Horror</option>
    <option value="Musical">Musical</option>
    <option value="Mystery">Mystery</option>
    <option value="Romance">Romance</option>
    <option value="Science-Fiction">Science Fiction (Sci-Fi)</option>
    <option value="Superhero">Superhero</option>
    <option value="Thriller">Thriller</option>
    <option value="War">War</option>
    <option value="Western">Western</option>
      </select>

     <label for="edit_duration">Duration:</label>
      <input id="edit_duration" type="test" placeholder="2.5 min"/>
	
      <label for="edit_release_date">Release Date:</label>
      <input id="edit_release_date" type="date" />
    
      <label for="edit_language">Language:</label>
      <select id="edit_language" multiple> 
     <option value="Hindi">Hindi</option>
     <option value="English">English</option>
     <option value="Bengali">Bengali</option>
      </select>

      <label for="edit_starCast">Star Cast:</label>
      <input id="edit_starCast" type="text" placeholder="Rahul, Sujoy" />
	
      <button onclick="addEditDounload()"><strong>‚ûï</strong></button>      <button onclick="removeEditDownload()"><strong>üìõ</strong></button>
  <div id="additionalEditInputs" style="max-height: calc(1.2em * 20); overflow-y: auto; margin-top: 5px; margin-bottom: 5px; border: 2px solid gray; border-radius: 4px; padding: 3px;"></div>

<label for="edit_tags">Tags:</label>
      <input type="text" id="edit_tags" placeholder="Enter Tags and write ,">
      <div class="tag-container" id="tagContainer"></div>

      <button onclick="editSave()" class="add-button" style="margin-top: 15px;">Save</button>
    </div>
  </div>


<script>
let editDownloadCount = 0;
    function addEditDounload() {
editDownloadCount++;
      const additionalEditInputs = document.getElementById('additionalEditInputs');
additionalEditInputs.appendChild(document.createElement('br'));
     var cedittext = document.createElement('span');
cedittext.style = "margin: 0 auto; margin-top: 10px;";
cEdittext.innerHTML = `Link ${downloadCount}`;
additionalEditInputs.appendChild(cedittext);
	    
      // Create input fields for download link, size, and quality  
      const editDownloadLinkInput = document.createElement('input');
      editDownloadLinkInput.type = 'text';
      editDownloadLinkInput.id = `downLink_${editDownloadCount}`;
      editDownloadLinkInput.placeholder = `Enter Download Link for link #${editDownloadCount}`;
      additionalEditInputs.appendChild(editDownloadLinkInput);

      const sizeEditInput = document.createElement('input');
      sizeEditInput.type = 'text';
      sizeEditInput.id = `size_${editDownloadCount}`;
      sizeEditInput.placeholder = `Enter Size for link #${editDownloadCount}`;
      additionalEditInputs.appendChild(sizeEditInput);

      const qualityEditInput = document.createElement('select');
      qualityEditInput.innerHTML = `
        <option value="144p">144p</option>
        <option value="360p">360p</option>
        <option value="480p">480p</option>
        <option value="720p">720p</option>
        <option value="1080p">1080p</option>
        <option value="2k">2k</option>
        <option value="4k">4k</option>
      `;
      qualityEditInput.id = `qual_${editDownloadCount}`;
      additionalEditInputs.appendChild(qualityEditInput);
   
      const noteEditInput = document.createElement('input');
      noteEditInput.type = 'text';
      noteEditInput.placeholder = `eg. parts (optional) for link #${editDownloadCount}`;
      noteEditInput.id = `note_${editDownloadCount}`;
      additionalEditInputs.appendChild(noteEditInput);

additionalEditInputs.scrollTop = additionalEditInputs.scrollHeight;

    }
function removeEditDownload() {
      const additionalEditInputs = document.getElementById('additionalEditInputs');

      // Remove the last set of inputs if there are more than one set
      if (editDownloadCount > 0) {
        for (let i = 0; i < 6; i++) {
          additionalEditInputs.removeChild(additionalEditInputs.lastChild);
        }
        editDownloadCount--;
      }
    }

function clearEditInp() {
var i = confirm("üóëÔ∏è Are you sure to clear all inputs?");
if(i){
var ii = confirm("clearing all inputs... üóëÔ∏è");
if(ii){
document.querySelectorAll("input[id^='edit_']").forEach(lak => lak.value = "");
document.querySelectorAll("textarea[id^='edit_']").forEach(lak => lak.value = "");
}
}
}
    function editSave() {
return;
let finalData = {};
finalData.name = document.querySelector("#name").value;
finalData.imageUrl = document.querySelector("#imageUrl").value;
finalData.description = document.querySelector("#description").value;
finalData.category = Array.from(document.querySelectorAll('#category option:checked')).map(option => option.value);
finalData.duration = document.querySelector("#duration").value;
finalData.release_date = document.querySelector("#release_date").value;
finalData.language = Array.from(document.querySelectorAll('#language option:checked')).map(option => option.value);
finalData.cast = document.querySelector("#starCast").value;
finalData.tags = ttags;
finalData.links = [];
for(i=1; i<downloadCount+1; i++){
var ary = {};
ary.download = document.querySelector(`#downLink_${i}`).value;
ary.size = document.querySelector(`#size_${i}`).value;
ary.note = document.querySelector(`#note_${i}`).value;
ary.quality = document.querySelector(`#qual_${i}`).value;
finalData.links.push(ary);
	}

      // Clear input fields and tags container
      document.querySelector("#tags").value = '';
      document.querySelector("#tagContainer").innerHTML = '';
      closeEditModal(); // Close the modal after adding the card
    }

//close button press function
function closeEditModal(){
document.querySelector("#myEditModal").style.display = "none";
}

//function to get movie details from id and then open edit modal üôÇ
function editMovie(name){
if(!name || name.trim() === ""){
return;
}
fetch(`/admin/data/get/movie/${name}`).then(data => data.json).then(data => {
if(data.success === false || data.success == 'false' || !data.success){
return;
}
document.querySelector("#myEditModal").style.display = "flex";
document.querySelector("#edit_name").value = data.name;
document.querySelector("#edit_imageUrl").value = data.img;
document.querySelector("#edit_description").value = data.description;
document.querySelector("#edit_duration").value = data.duration;
}).catch();
}
</script>
